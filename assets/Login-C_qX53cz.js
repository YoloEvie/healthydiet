import{_ as V,u as v}from"./index-bPO5O26h.js";import{a as h}from"./axios-NIGUFBhG.js";import{r as i,b as k,k as l,y as x,o as N,j as t,g as s,l as p,f as a}from"./element-plus-BAXMo5c4.js";const S={class:"card-footer"},I={__name:"Login",setup(B){const _=v(),f=i(null),r=k({phonenumber:"",password:""}),n=i(""),c=async()=>{n.value="";try{const o=await h.post("http://localhost:3000/api/users/login",{phone_number:r.phonenumber,password:r.password});o.status===200&&(localStorage.setItem("user_id",JSON.stringify(o.data.user.user_id)),localStorage.setItem("username",JSON.stringify(o.data.user.username)),localStorage.setItem("role",JSON.stringify(o.data.user.role)),_.push("/"))}catch(o){o.response&&o.response.data?n.value=o.response.data.message||"登录失败，请重试":n.value="网络错误，请稍后再试"}};return(o,e)=>{const m=l("el-input"),u=l("el-form-item"),g=l("el-button"),b=l("el-form"),y=l("router-link"),w=l("el-card");return N(),x(w,{class:"login-card"},{header:t(()=>e[2]||(e[2]=[a("div",{class:"card-header"},[a("h2",null,"欢迎来到悦然食光！"),a("p",null,"让每一餐点亮身心，开启你的乐活滋养旅程吧")],-1)])),footer:t(()=>[a("div",S,[a("span",null,[e[5]||(e[5]=p(" 没有账号？ ")),s(y,{to:"/register"},{default:t(()=>e[4]||(e[4]=[p("立即注册")])),_:1,__:[4]})])])]),default:t(()=>[s(b,{ref_key:"loginFormRef",ref:f,model:r,"label-width":"80px",class:"login-form"},{default:t(()=>[s(u,{label:"电话"},{default:t(()=>[s(m,{modelValue:r.phonenumber,"onUpdate:modelValue":e[0]||(e[0]=d=>r.phonenumber=d),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),s(u,{label:"密码"},{default:t(()=>[s(m,{type:"password",modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=d=>r.password=d),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),s(u,null,{default:t(()=>[s(g,{type:"primary",onClick:c},{default:t(()=>e[3]||(e[3]=[p("登录")])),_:1,__:[3]})]),_:1})]),_:1},8,["model"])]),_:1})}}},L=V(I,[["__scopeId","data-v-296d7427"]]);export{L as default};
